#!/bin/sh
# lf-cache-cleaner: clear cached PDF/image previews in lf

CACHE_DIR="$HOME/.cache/lf"

# Exit if cache directory doesn't exist
[ -d "$CACHE_DIR" ] || {
  echo "ðŸ›‘ Cache directory not found: $CACHE_DIR"
  exit 1
}

# Remove only thumbnail.*.png and *.jpg (PDF previews)
deleted=$(find "$CACHE_DIR" -type f \( -name 'thumbnail.*.png' -o -name 'thumbnail.*.jpg' \) -print -delete)

if [ -n "$deleted" ]; then
  echo "ðŸ§¹ Deleted the following preview files:"
  echo "$deleted"
else
  echo "âœ… No thumbnail files found to delete."
fi

exit 0

