### Variables
set $mainMod Mod4
set $terminal foot
set $menu fuzzel --config ~/.config/fuzzel/fuzzel.ini
set $terminalFileManager $terminal -e tmux new-session yazi
set $fileManager thunar
set $browser zen-browser
set $terminalEditor $terminal -e tmux new-session nvim

### Input
# Keyboard
input type:keyboard {
    xkb_layout "us"
    xkb_options "caps:none"
    repeat_delay 300
    repeat_rate 75
}

# Touchpad
input type:touchpad {
    dwt enabled
    tap enabled
    natural_scroll enabled
    accel_profile flat
    pointer_accel 0
    scroll_method two_finger
}

# Mouse
input type:pointer {
    accel_profile flat
    pointer_accel 0
}

# Focus behavior
focus_follows_mouse yes
focus_on_window_activation none

# Cursor
seat seat0 xcursor_theme Adwaita 20

### Output
output VGA-1 {
    mode 1360x768@60Hz
    pos 0 0
}

output HDMI-A-1 {
    mode 1920x1080@60Hz
    pos 1360 0
}


### Visuals & Layout
# Gaps
gaps inner 6
gaps outer 0

# Borders
default_border pixel 1
default_floating_border pixel 1

# Layout
layout_default_width 0.5
layout_default_height 1.0
layout_widths [0.33333333 0.5 0.666666667 1.0]
layout_heights [0.33333333 0.5 0.666666667 1.0]

# Colors
# Class                 Border    Background Text     Indicator Child Border
client.focused          #ffffff   #000000    #ffffff  #ffffff   #ffffff
client.focused_inactive #595959   #000000    #ffffff  #595959   #595959
client.unfocused        #595959   #000000    #888888  #595959   #595959
client.urgent           #9b0000   #9b0000    #ffffff  #9b0000   #9b0000

# Animations
animations {
    enabled no
}

# Environment & Rules
# Window Rules
# Open Firefox Picture-in-Picture as floating
for_window [app_id="firefox" title="Picture-in-Picture"] floating enable

# Environment Variables
exec systemctl --user import-environment GTK_THEME MOZ_ENABLE_WAYLAND VISUAL EDITOR

### Keybindings
# Common:
    bindsym $mainMod+T exec $terminal
    bindsym $mainMod+B exec $browser
    bindsym $mainMod+E exec $terminalEditor
    bindsym $mainMod+R exec $terminalFileManager
    bindsym $mainMod+Shift+R exec $fileManager
    bindsym $mainMod+F exec $menu
    bindsym $mainMod+W exec pkill -SIGUSR1 waybar
    bindsym $mainMod+Q kill
    bindsym $mainMod+N exec swaylock
    bindsym $mainMod+M exec scrollnag -t warning -m 'You pressed the exit shortcut. Do you really want to exit scroll? This will end your Wayland session.' -B 'Yes, exit scroll' 'scrollmsg exit' -w 500 -e center -y overlay

# Windows
    bindsym $mainMod+A toggle_size this 1.0 1.0
    bindsym $mainMod+Shift+A fullscreen
    bindsym $mainMod+V floating toggle

# Image
    # Area selection
    bindsym $mainMod+Shift+S exec grim -g "$(slurp)" - | tee ~/Pictures/Screenshots/Screenshot_$(date +'%Y-%m-%d_%H-%M-%S').png | wl-copy
    # Full screen
    bindsym $mainMod+Shift+O exec grim - | tee ~/Pictures/Screenshots/Screenshot_$(date +'%Y-%m-%d_%H-%M-%S').png | wl-copy
    # Focused window
    bindsym $mainMod+Shift+W exec grim -g "$(swaymsg -t get_tree | jq -r '.. | select(.focused?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"')" - | tee ~/Pictures/Screenshots/Screenshot_$(date +'%Y-%m-%d_%H-%M-%S').png | wl-copy

# Move focus
    bindsym $mainMod+Left focus left
    bindsym $mainMod+Down focus down
    bindsym $mainMod+Up focus up
    bindsym $mainMod+Right focus right

    bindsym $mainMod+h focus left
    bindsym $mainMod+j focus down
    bindsym $mainMod+k focus up
    bindsym $mainMod+l focus right

    bindsym $mainMod+Home focus beginning
    bindsym $mainMod+End focus end

# Moving Windows
    bindsym $mainMod+Ctrl+Left move left
    bindsym $mainMod+Ctrl+Down move down
    bindsym $mainMod+Ctrl+Up move up
    bindsym $mainMod+Ctrl+Right move right

    bindsym $mainMod+Ctrl+h move left
    bindsym $mainMod+Ctrl+j move down
    bindsym $mainMod+Ctrl+k move up
    bindsym $mainMod+Ctrl+l move right

    bindsym $mainMod+Ctrl+Home move beginning
    bindsym $mainMod+Ctrl+End move end

    bindsym --whole-window $mainMod+button5 workspace next
    bindsym --whole-window $mainMod+button4 workspace prev

# Workspaces:
    # Switch to workspace
    bindsym $mainMod+1 workspace number 1
    bindsym $mainMod+2 workspace number 2
    bindsym $mainMod+3 workspace number 3
    bindsym $mainMod+4 workspace number 4
    bindsym $mainMod+5 workspace number 5
    bindsym $mainMod+6 workspace number 6
    bindsym $mainMod+7 workspace number 7
    bindsym $mainMod+8 workspace number 8
    bindsym $mainMod+9 workspace number 9
    bindsym $mainMod+0 workspace number 10
    # Move focused container to workspace
    bindsym $mainMod+Ctrl+1 move container to workspace number 1
    bindsym $mainMod+Ctrl+2 move container to workspace number 2
    bindsym $mainMod+Ctrl+3 move container to workspace number 3
    bindsym $mainMod+Ctrl+4 move container to workspace number 4
    bindsym $mainMod+Ctrl+5 move container to workspace number 5
    bindsym $mainMod+Ctrl+6 move container to workspace number 6
    bindsym $mainMod+Ctrl+7 move container to workspace number 7
    bindsym $mainMod+Ctrl+8 move container to workspace number 8
    bindsym $mainMod+Ctrl+9 move container to workspace number 9
    bindsym $mainMod+Ctrl+0 move container to workspace number 10
    
### Scratchpad
    # Sway has a "scratchpad", which is a bag of holding for windows.
    # You can send windows there and get them back later.

    # Move the currently focused window to the scratchpad
    bindsym $mainMod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mainMod+minus scratchpad show

### Utilities:
    # Special keys to adjust volume via PulseAudio
    bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
    bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
    bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
    bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle

    # Special keys to control media via playerctl
    bindsym --locked XF86AudioPlay exec playerctl play-pause
    bindsym --locked XF86AudioPause exec playerctl play-pause
    bindsym --locked XF86AudioPrev exec playerctl previous
    bindsym --locked XF86AudioNext exec playerctl next
    bindsym --locked XF86AudioStop exec playerctl stop

    # Special keys to adjust brightness via brightnessctl
    bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
    bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+

    # Right and Left click on floating windows to Resize and Move
    floating_modifier $mainMod normal

    # Reload the configuration file
    bindsym $mainMod+Shift+c reload

    # Reload waybar indicators
    bindsym $mainMod+Shift+i exec pkill -SIGRTMIN+8 waybar

### Startup
# Wallpaper
exec swww-daemon
exec swww img ~/.config/Wallpaper.jpg

# Status Bar
exec waybar --config ~/.config/waybar/configSway.json

# Idle management
exec swayidle -w \
     timeout 600 'swaylock -f -c 000000' \
     timeout 900 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
     before-sleep 'swaylock -f -c 000000'

# GTK Theme settings
exec_always {
    gsettings set org.gnome.desktop.interface gtk-theme 'Adwaita-dark'
    gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'
}

# Awatcher
exec awatcher

exec systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=scroll

include @sysconfdir@/sway/config.d/*
